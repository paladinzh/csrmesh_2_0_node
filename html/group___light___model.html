Copyright 2015 Qualcomm Technologies International, Ltd.<br>
Bluetooth Low Energy CSRmesh 2.0<br>
CSRmesh&trade; is a product of Qualcomm Technologies International Ltd.
<hr width="100%">
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">Light Model<div class="ingroups"><a class="el" href="group___stack.html">CSRmesh&amp;trade;</a> &raquo; <a class="el" href="group___models.html">Models</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Light Model API.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___light___client"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___light___client.html">Client</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___light___server"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___light___server.html">Server</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_e_t___l_e_v_e_l___t.html">CSRMESH_LIGHT_SET_LEVEL_T</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">CSRmesh Light Model message types.  <a href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_e_t___l_e_v_e_l___t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_e_t___r_g_b___t.html">CSRMESH_LIGHT_SET_RGB_T</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setting Light Colour: Upon receiving a LIGHT_SET_RGB_NO_ACK message, the device saves the Level, Red, Green, and Blue fields into the TargetLevel, TargetRed, TargetGreen, and TargetBlue variables respectively. LevelSDState should be set to Attacking. If the Duration field is zero, then the device saves the Level, Red, Green, and Blue fields into the CurrentLevel, CurrentRed, CurrentGreen and CurrentBlue variables, and sets the DeltaLevel, DeltaRed, DeltaGreen, and DeltaBlue variables to zero. If the Duration field is greater than zero, then the device calculates the DeltaLevel, DeltaRed, DeltaGreen, and DeltaBlue levels from the differences between the Current values and the Target values divided by the Duration field, so that over Duration seconds, the CurrentLevel, CurrentRed, CurrentGreen, and CurrentBlue variables are changed smoothly to the TargetLevel, TargetRed, TargetGreen and TargetBlue values. If ACK is requested, the device responds with a LIGHT_STATE message.  <a href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_e_t___r_g_b___t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_e_t___p_o_w_e_r___l_e_v_e_l___t.html">CSRMESH_LIGHT_SET_POWER_LEVEL_T</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setting Light Power and Light Level: Upon receiving a LIGHT_SET_POWER_LEVEL_NO_ACK message, the device sets the current PowerState to the Power field, the TargetLevel variable to the Level field, the DeltaLevel to the difference between TargetLevel and CurrentLevel divided by the LevelDuration field, saves the Sustain and Decay fields into the LevelSustain and LevelDecay variables, and sets LevelSDState to the Attacking state. If ACK is requested, the device should respond with a LIGHT_STATE message.  <a href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_e_t___p_o_w_e_r___l_e_v_e_l___t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_e_t___c_o_l_o_r___t_e_m_p___t.html">CSRMESH_LIGHT_SET_COLOR_TEMP_T</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setting Light Colour Temperature: Upon receiving a LIGHT_SET_COLOR_TEMP message, the device saves the ColorTemperature field into the TargetColorTemperature state variable. If the TempDuration field is zero, the CurrentColorTemperature variable is set to TargetColorTemperature and DeltaColorTemperature is set to zero. If the TempDuration field is greater than zero, then the device calculates the difference between TargetColorTemperature and CurrentColorTemperature, over the TempDuration field and store this into a DeltaColorTemperature state variable, so that over TempDuration seconds, CurrentColorTemperature changes smoothly to TargetColorTemperature. The device then responds with a LIGHT_STATE message.  <a href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_e_t___c_o_l_o_r___t_e_m_p___t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_s_r_m_e_s_h___l_i_g_h_t___g_e_t___s_t_a_t_e___t.html">CSRMESH_LIGHT_GET_STATE_T</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getting Light State: Upon receiving a LIGHT_GET_STATE message, the device responds with a LIGHT_STATE message.  <a href="struct_c_s_r_m_e_s_h___l_i_g_h_t___g_e_t___s_t_a_t_e___t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_t_a_t_e___t.html">CSRMESH_LIGHT_STATE_T</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current light state.  <a href="struct_c_s_r_m_e_s_h___l_i_g_h_t___s_t_a_t_e___t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><br />
The Light Model controls devices that typically have dimmable and/or coloured lights. It is also possible to control the power of the lights and have lights change their level and colour slowly. The light model also allows the fine tuning of the colour temperature of the light over time. For example, the light can be set to be bluer in the morning and slowly becomes yellower by the time of the afternoon. Finally, the light model allows the intensity of the light to change based on the received signal strength of certain assets. <br />
<br />
</p><h4>Light State</h4>
<p>The light model has the following states:</p><ul style="list-style:square;list-style-position: inside;">
<li style="list-style-type:square;">
CurrentLevel</li>
<li style="list-style-type:square;">
DeltaLevel</li>
<li style="list-style-type:square;">
RedLevel</li>
<li style="list-style-type:square;">
GreenLevel</li>
<li style="list-style-type:square;">
BlueLevel</li>
<li style="list-style-type:square;">
DeltaRedLevel</li>
<li style="list-style-type:square;">
DeltaGreenLevel</li>
<li style="list-style-type:square;">
DeltaBlueLevel </li>
<li style="list-style-type:square;">
TargetLevel</li>
<li style="list-style-type:square;">
TargetRed</li>
<li style="list-style-type:square;">
TargetGreen </li>
<li style="list-style-type:square;">
TargetBlue</li>
<li style="list-style-type:square;">
LevelSDState </li>
<li style="list-style-type:square;">
LevelDuration </li>
<li style="list-style-type:square;">
LevelSustain</li>
<li style="list-style-type:square;">
LevelDecay </li>
<li style="list-style-type:square;">
ColorTemperature</li>
<li style="list-style-type:square;">
DeltaColorTemperature </li>
<li style="list-style-type:square;">
TargetColorTemperature</li>
</ul>
<p><br />
</p><h5>Current Level </h5>
<p>CurrentLevel is an unsigned integer representing values from 0x00 to 0xFF. The value 0x00 represents fully off, and the value 0xFF represents fully on. Values between these two extremes represent a linear change in observed brightness from fully off to fully on. For example, the value 0x80 represents half observed brightness.<br />
<br />
</p><h5>DeltaLevel</h5>
<p>DeltaLevel represents the desired change in CurrentLevel to TargetLevel over a given period of time. <br />
<br />
 </p><h5>LevelSDState</h5>
<p>LevelSDState is an enumeration that represents the following values:</p><ul style="list-style:square;list-style-position: inside;">
<li style="list-style-type:square;">
Idle</li>
<li style="list-style-type:square;">
Attacking </li>
<li style="list-style-type:square;">
Sustaining</li>
<li style="list-style-type:square;">
Decaying </li>
</ul>
<p><br />
</p><h4>Background Behaviour</h4>
<p>If CurrentLevel is different from TargetLevel, then CurrentLevel should be changed by DeltaLevel. If CurrentLevel reaches TargetLevel, then a LIGHT_STATE_NO_ACK message may be sent.<br />
<br />
 If CurrentRed is different from TargetRed, then CurrentRed should be changed by DeltaRed. If CurrentRed reaches TargetRed, then a LIGHT_STATE_NO_ACK message may be sent.<br />
<br />
 If CurrentGreen is different from TargetGreen, then CurrentGreen should be changed by DeltaGreen. If CurrentGreen reaches TargetGreen, then a LIGHT_STATE_NO_ACK message may be sent.<br />
<br />
 If CurrentBlue is different from TargetBlue, then CurrentBlue should be changed by DeltaBlue. If CurrentBlue reaches TargetBlue, then a LIGHT_STATE_NO_ACK message may be sent.<br />
<br />
 If LevelSDState is Attacking and CurrentLevel is TargetLevel, then LevelSDState should be set to Sustaining and a timer starts for LevelSustain seconds.<br />
<br />
 If LevelSDState is Sustaining and the timer expires, LevelSDState is set to Decaying, TargetLevel is set to zero, DeltaLevel is set to the difference between CurrentLevel and TargetLevel divided by LevelDecay seconds, and a LIGHT_STATE_NO_ACK message may be sent.<br />
<br />
 If LevelSDState is Decaying, and CurrentLevel is the same as TargetLevel, then LevelSDState is set to Idle. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Oct 27 2015 21:16:50 for CSRmesh &trade; API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
